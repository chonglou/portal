$!{extends("/frame.httl")}

#macro(left_nav_bar(List<NavBar> navBars))
#if(navBars)
<div class="well sidebar-nav">
    <ul class="nav nav-list">
        #for(NavBar i:navBars)
            <li class="nav-header">${i.title}</li>
            #if(i.ajax)
                #for(Page j: i.pages)
                    <li><a id="left_nav-${j.url}">${j.name}</a></li>
                #end
            #else
                #for(Page j: i.pages)
                <li><a href="${j.url}" target="_blank">${j.name}</a></li>
                #end
            #end
        #end
    </ul>
</div>
#end
#end

#macro(left_3d_tag_zone(List tags))
<link href="/jcloud/jcloud.css" rel="stylesheet"/>
<script type="text/javascript" src="/jcloud/jcloud.js"></script>
<script type="text/javascript">
$(document).ready(function () {
    $('ul#jcloud-tags').jcloud({
        radius: 150,
        size: 30,
        step: 2,
        speed: 50,
        flats: 2,
        clock: 10,
        areal: 100,
        splitX: 100,
        splitY: 100,
        colors: ['#000000', '#DD2222', '#2267DD', '#2A872B', '#872A7B', '#CAC641']
    });
});
</script>
<ul id="jcloud-tags">
#for(i:tags)
    <li><a href="/tag/${i}">${i}</a></li>
#end
</ul>
#end

#macro(personal_bar)
    #set(SessionItem gl_session)
    #if(gl_session)
        #set(personal_bar_items=["self":"用户中心","logout":"安全退出"])
        #set(personal_bar_sort=["self", "logout"])
        #set(personal_bar_name="欢迎你，"+gl_session.username+"。")
    #else
        #set(personal_bar_items=["login":"用户登录", "register":"账户注册", "reset_pwd":"重置密码"])
        #set(personal_bar_sort=["login", "register", "reset_pwd"])
        #set(personal_bar_name="登录/注册")
    #end

    <div class="btn-group pull-right">
    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
        <i class="icon-user">&nbsp;</i> ${personal_bar_name}
        <span class="caret">&nbsp;</span>
    </a>
    <ul class="dropdown-menu">
        #for(i : personal_bar_sort)
            <li><a id="personal_bar-${i}">${personal_bar_items[i]}</a></li>
            #if(!for.last)
            <li class="divider">&nbsp;</li>
            #end
        #end
    </ul>
    </div>
#end

#macro(top_nav_bar(String top_nav_key, Map<String,Object> gl_site))
    #set(top_nav_bar_sorts=["main", "personal", "sitemap", "about_me"])
    <div class="nav-collapse">
        <ul class="nav">
            #set(Map<String,String> topNavs=gl_site.topNavs)
            #for(i : ["main", "personal", "sitemap", "about_me"])
                <li
                #if(top_nav_key == i)
                class="active"
                #end
                ><a href="/${i}">${topNavs.get(i)}</a><li>
            #end
        </ul>
        <form method="post" target="_blank" action="/search" class="navbar-search pull-left">
            <input type="text" name="keyword" class="search-query" placeholder="点击此处进行搜索">
        </form>
    </div>
#end